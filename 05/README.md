«PHP-1: Введение в профессию» 
Домашняя работа №5. Строим систему авторизации на нашем сайте:

.......................................................................................................................

1. Для начала создайте несколько полезных функций и выделите их в отдельный файл:
    1.Функция getUsersList() пусть возвращает массив всех пользователей и хэшей их паролей.
    2.Функция existsUser($login) проверяет - существует ли пользователь с заданным логином?
    3.Функция checkPassword($login, $password) пусть возвращает true тогда, 
      когда существует пользователь с указанным логином и введенный им пароль прошел проверку.

РЕШЕНИЕ:
Создадим файл '/1/functions.php' в который будем хранить функции.

1. Создадим функцию getUsersList().
Функция getUsersList() возвращает массив всех пользователей и хэшей их паролей.
Сгенерируем хеши паролей, используя функцию 'password_hash()', с параметром 'PASSWORD_DEFAULT' итого получим:
'admin' => '$2y$10$5Feq8lKpKhVSlogCyrt/2uSyB4bX9CcUfim09XoYjk7uheB61W8wS', // 'P@$$w0rd42!?'
'user'  => '$2y$10$Ms6YUxa0EBOIZFRiFnv.cecwZ5wIbh0qW6v4fMswjPrjjU4LuzVyK', // 'MySecretWord'
'guest' => '$2y$10$qnorP6MxGC/9re2vPk2Fp.BThyScqbUcvKc.i8l5AZyS0OgMuglXO', // '123456'

2. Создадим функцию existsUser($login).
Функция existsUser($login) проверяет - существует ли пользователь с заданным логином: 
Если есть - вернет true, если нет - вернет null.

3. Создадим функцию checkPassword($login, $password).
Функция checkPassword($login, $password) возвращает true тогда, 
когда существует пользователь с указанным логином и введенный им пароль прошел проверку.
Иначе - вернет null.

....................................................................................................................... 

2. Добавьте функцию getCurrentUser() которая возвращает либо имя вошедшего на сайт пользователя, либо null.

РЕШЕНИЕ:
Создадим функцию getCurrentUser().
Функция getCurrentUser() возвращает либо имя вошедшего на сайт пользователя, либо null.

....................................................................................................................... 

3. Добавьте к проекту страничку login.php, которая:
    1.ЕСЛИ пользователь уже вошел (см. пункт 2), ТО редирект на главную страницу.
    2.ЕСЛИ пользователь не вошел - отображает форму входа.
    3.ЕСЛИ введены данные в форму входа - проверяем им (см. пункт 1.3) и ЕСЛИ проверка прошла, 
      ТО запоминаем информацию о вошедшем пользователе.

РЕШЕНИЕ:
Создадим файл '/1/login.php' - как "Страница ЛОГИНа".
 
1. ЕСЛИ пользователь уже вошел (см. пункт 2) функция getCurrentUser(): 
Если значение != null - ТО редирект на главную страницу. 

2. ЕСЛИ пользователь не вошел - отображает форму входа.

3.ЕСЛИ введены данные в форму входа - проверяем им (см. пункт 1.3) и ЕСЛИ проверка прошла, 
      ТО запоминаем информацию о вошедшем пользователе.

Напишим обработчик данных из форм в сооветствии с требованиями.

....................................................................................................................... 

4. Модифицируйте ваш проект: позволяйте загружать изображения в галерею только авторизованным пользователям, 
ведите лог (запись в файл) с данными: кто, когда и какое изображение загрузил.

РЕШЕНИЕ:

1. позволяйте загружать изображения в галерею только авторизованным пользователям:
В файле '/1/login.php' - добавим строку #12 - если пользователь авторизовался, сохраним имя пользователя 
в $_SESSION['username'].

Модифицируем файл '/1/index.php' - добавим блок #61-#89 - в котором проверяется авторизован ли пользователь:
Если пользователь авторизовался - выводит блок который включает в себя имя пользователя и форму загрузки.
Если пользователь не авторизовался - выводит блок в котором предлагается перейти на страницу ЛОГИН. 

2. ведите лог (запись в файл) с данными: кто, когда и какое изображение загрузил.
Создадим папку для лог файлов '/1/logs/', создадим в этой папке файл 'upload.log' - в который будем писать логи.

Создадим файл в файле '/1/functions.php' функцию addRecordToLogsUploads($username, $upload_file_name) - для записи логов.
Данную функцию будем запускать после проверки загружаемого файла в файле 'upload.php'

.......................................................................................................................