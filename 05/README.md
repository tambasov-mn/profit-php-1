«PHP-1: Введение в профессию» 
Домашняя работа №5.

.......................................................................................................................

Строим систему авторизации на нашем сайте:

1. Для начала создайте несколько полезных функций и выделите их в отдельный файл:
    1.Функция getUsersList() пусть возвращает массив всех пользователей и хэшей их паролей.
    2.Функция existsUser($login) проверяет - существует ли пользователь с заданным логином?
    3.Функция сheckPassword($login, $password) пусть возвращает true тогда, 
      когда существует пользователь с указанным логином и введенный им пароль прошел проверку.

РЕШЕНИЕ:

1. Создадим файл '/1/f_get_users_list.php'с функцией getUsersList().
Функция getUsersList() возвращает массив всех пользователей и хэшей их паролей.
Сгенерируем хеши паролей, используя функцию 'password_hash()', с параметром 'PASSWORD_DEFAULT' итого получим:
'admin' => '$2y$10$5Feq8lKpKhVSlogCyrt/2uSyB4bX9CcUfim09XoYjk7uheB61W8wS', // 'P@$$w0rd42!?'
'user'  => '$2y$10$Ms6YUxa0EBOIZFRiFnv.cecwZ5wIbh0qW6v4fMswjPrjjU4LuzVyK', // 'MySecretWord'

2. Создадим файл '/1/f_exists_user.php'с функцией existsUser($login).
Функция existsUser($login) проверяет - существует ли пользователь с заданным логином: 
Если есть - вернет true, если нет - вернет null.

3. Создадим файл '/1/f_сheck_password.php' с функцией сheckPassword($login, $password).
Функция сheckPassword($login, $password) возвращает true тогда, 
когда существует пользователь с указанным логином и введенный им пароль прошел проверку.
Иначе - вернет null.

....................................................................................................................... 

2. Добавьте функцию getCurrentUser() которая возвращает либо имя вошедшего на сайт пользователя, либо null.

РЕШЕНИЕ:
Создадим файл '/1/f_get_current_user.php' с функцией getCurrentUser().
Функция getCurrentUser() возвращает либо имя вошедшего на сайт пользователя, либо null.

Так как к функции сheckPassword() - нет доступа внутри функции getCurrentUser() то для решение данной задачи например:
Создадим статус пользователя (залогинился или нет) в сессиях $_SESSION['check_status'] - которое будет иметь значение 
true или будет отсутствовать.
Создадим имя пользователя (который залогинился) в сессиях $_SESSION['username'] - которое будет иметь значение 
имя пользователя или будет отсутствовать.

Исходя из этого функция getCurrentUser() - веернет либо имя вошедшего на сайт пользователя, либо null.

....................................................................................................................... 

3. Добавьте к проекту страничку login.php, которая:
    1.ЕСЛИ пользователь уже вошел (см. пункт 2), ТО редирект на главную страницу.
    2.ЕСЛИ пользователь не вошел - отображает форму входа.
    3.ЕСЛИ введены данные в форму входа - проверяем им (см. пункт 1.3) и ЕСЛИ проверка прошла, 
      ТО запоминаем информацию о вошедшем пользователе.

РЕШЕНИЕ:
Создадим файл '/1/login.php' - как "Страница ЛОГИНа".
 
1. ЕСЛИ пользователь уже вошел (см. пункт 2) функция getCurrentUser(): 
Если значение != null - ТО редирект на главную страницу. 

2. ЕСЛИ пользователь не вошел - отображает форму входа.

3.ЕСЛИ введены данные в форму входа - проверяем им (см. пункт 1.3) и ЕСЛИ проверка прошла, 
      ТО запоминаем информацию о вошедшем пользователе.

Напишим обработчик данных из форм в сооветствии с требованиями.

....................................................................................................................... INN

4. Модифицируйте ваш проект: позволяйте загружать изображения в галерею только авторизованным пользователям, 
ведите лог (запись в файл) с данными: кто, когда и какое изображение загрузил.

РЕШЕНИЕ:

1. позволяйте загружать изображения в галерею только авторизованным пользователям



2. ведите лог (запись в файл) с данными: кто, когда и какое изображение загрузил.










'/1/index.php' ----------------------------- индексный файл.

.......................................................................................................................